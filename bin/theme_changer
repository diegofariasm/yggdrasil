#!/usr/bin/env bash

# Directory
dwm_dir="$HOME/.config/dwm"
dmenu_dir="$HOME/.config/dwm"
dwm_luastatus_dir="$HOME/.config/dwm/luastatus/colorscheme"

prompt="dmenu -l 9 "
#prompt="rofi -dmenu"

# for restarting dwm
dwm_pid="$(pidof dwm)"

# Theme
cancel="窱 Cancel"
theme1=" Cozy-Night"
theme2=" Cozy Warm"
theme3=" Dracula"
theme4=" Gruvbox"
theme5=" Nord"

# Variable to pass to dmenu or rofi
option="$cancel\n$theme1\n$theme2\n$theme3\n$theme4\n$theme5"


theme_change()
{
	cp ${dwm_dir}/dwm_xresources/$1 ${dwm_dir}/dwm_xresources/theme
	cp ${dmenu_dir}/dmenu_xresources/$1 ${dmenu_dir}/dmenu_xresources/theme
	cp ${dwm_luastatus_dir}/$1.lua ${dwm_luastatus_dir}/color.lua

	xrdb -merge -I$HOME ~/.Xresources # reload Xresources

  # calls xrdb function in dwm
  xsetroot -name "fsignal:2"
  # update luastatus
  kill -9 $(pidof luastatus)
}

select="$(echo -e "$option" | $prompt -p "Choose a theme: " )"
case $select in
	$theme1)
		feh --bg-fill $HOME/.config/wallpaper/pixelart_night_train_cozy_gas.png
		theme_change cozy-night
		;;
	$theme2)
		feh --bg-fill $HOME/.config/wallpaper/pixelart_medicine_flower_reminder_nord.png
		theme_change cozy-night_warm
		;;
	$theme3)
		feh --bg-fill $HOME/.config/wallpaper/pixelart_arabian_palace_princess.png
		theme_change dracula
		;;
	$theme4)
		feh --bg-fill $HOME/.config/wallpaper/pixelart_house_inside_girl_book_dog.png
		theme_change gruvbox
		;;
	$theme5)
		feh --bg-fill $HOME/.config/wallpaper/pixelart_medicine_flower_reminder_nord.png
		theme_change nord
		;;
	esac
