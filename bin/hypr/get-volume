#!/usr/bin/env bash

if ! command -v pamixer &>/dev/null; then
	echo "pamixer command not found. Please install pamixer."
	exit
fi

current_volume=$(pamixer --get-volume)

if [[ -z "$current_volume" ]]; then
	echo "Error: failed to get volume"
	exit
fi

last_volume=-1

while true; do

	# Output the percentage if it has changed
	if [[ "$current_volume" -ne "$last_volume" ]]; then
		printf "%d\n" "$current_volume"
		last_volume=$current_volume
	fi

	# Sleep for 1 second before checking again
	sleep 1

	# Update the current brightness level in case it has changed
	current_volume=$(pamixer --get-volume)
done
